--
-- PostgreSQL database cluster dump
--

-- Started on 2025-09-22 22:06:01

SET default_transaction_read_only = off;

SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;

--
-- Roles
--

CREATE ROLE postgres;
ALTER ROLE postgres WITH SUPERUSER INHERIT CREATEROLE CREATEDB LOGIN REPLICATION BYPASSRLS PASSWORD 'md5297dda3d5d447e069f89b01072415221';

--
-- User Configurations
--








--
-- Databases
--

--
-- Database "template1" dump
--

\connect template1

--
-- PostgreSQL database dump
--

-- Dumped from database version 17.5
-- Dumped by pg_dump version 17.5

-- Started on 2025-09-22 22:06:01

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

-- Completed on 2025-09-22 22:06:01

--
-- PostgreSQL database dump complete
--

--
-- Database "hotel" dump
--

--
-- PostgreSQL database dump
--

-- Dumped from database version 17.5
-- Dumped by pg_dump version 17.5

-- Started on 2025-09-22 22:06:01

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 5002 (class 1262 OID 16388)
-- Name: hotel; Type: DATABASE; Schema: -; Owner: postgres
--

CREATE DATABASE hotel WITH TEMPLATE = template0 ENCODING = 'UTF8' LOCALE_PROVIDER = libc LOCALE = 'Russian_Russia.1251';


ALTER DATABASE hotel OWNER TO postgres;

\connect hotel

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 222 (class 1259 OID 16404)
-- Name: booked_services; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.booked_services (
    id integer NOT NULL,
    "Бронирование_id" integer NOT NULL,
    "услуга_id" integer NOT NULL,
    "Количество" integer,
    "Дата" timestamp without time zone
);


ALTER TABLE public.booked_services OWNER TO postgres;

--
-- TOC entry 231 (class 1259 OID 16444)
-- Name: BookedServices_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.booked_services ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."BookedServices_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 220 (class 1259 OID 16398)
-- Name: bookings; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.bookings (
    id integer NOT NULL,
    "Номер_id" integer,
    "дата_заезда" timestamp without time zone,
    "дата_выезда" timestamp without time zone,
    "Статус" boolean,
    "Гость_id" integer
);


ALTER TABLE public.bookings OWNER TO postgres;

--
-- TOC entry 229 (class 1259 OID 16434)
-- Name: Bookings_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.bookings ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Bookings_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 217 (class 1259 OID 16389)
-- Name: guests; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.guests (
    id integer NOT NULL,
    "дата_регистрации" timestamp without time zone,
    "Имя" text,
    "Фамилия" text,
    "Телефон" text,
    email text
);


ALTER TABLE public.guests OWNER TO postgres;

--
-- TOC entry 226 (class 1259 OID 16416)
-- Name: Guests_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.guests ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Guests_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 223 (class 1259 OID 16407)
-- Name: payments; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.payments (
    id integer NOT NULL,
    "Бронирование_id" integer NOT NULL,
    "Сумма" numeric(10,2),
    "Дата_платежа" timestamp without time zone,
    "Метод" "char"[]
);


ALTER TABLE public.payments OWNER TO postgres;

--
-- TOC entry 232 (class 1259 OID 16460)
-- Name: Payments_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.payments ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Payments_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 219 (class 1259 OID 16395)
-- Name: room_types; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.room_types (
    id integer NOT NULL,
    "название" text
);


ALTER TABLE public.room_types OWNER TO postgres;

--
-- TOC entry 228 (class 1259 OID 16428)
-- Name: RoomTypes_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.room_types ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."RoomTypes_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 218 (class 1259 OID 16392)
-- Name: rooms; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.rooms (
    id integer NOT NULL,
    "номер" integer,
    "стоимость_за_ночь" numeric(10,2),
    "вместимость" integer,
    "тип_номера" integer
);


ALTER TABLE public.rooms OWNER TO postgres;

--
-- TOC entry 227 (class 1259 OID 16422)
-- Name: Rooms_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.rooms ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Rooms_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 221 (class 1259 OID 16401)
-- Name: services; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.services (
    id integer NOT NULL,
    "Стоимость" numeric(10,2),
    "Название" text,
    "Тип" text
);


ALTER TABLE public.services OWNER TO postgres;

--
-- TOC entry 5003 (class 0 OID 0)
-- Dependencies: 221
-- Name: COLUMN services."Стоимость"; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.services."Стоимость" IS 'за услугу / сутки';


--
-- TOC entry 230 (class 1259 OID 16438)
-- Name: Services_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.services ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Services_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 224 (class 1259 OID 16410)
-- Name: staff; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.staff (
    id integer NOT NULL,
    "Имя" "char"[],
    "Фамилия" "char"[],
    "Должность" "char"[]
);


ALTER TABLE public.staff OWNER TO postgres;

--
-- TOC entry 233 (class 1259 OID 16466)
-- Name: Staff_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.staff ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Staff_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 225 (class 1259 OID 16413)
-- Name: room_assignments; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.room_assignments (
    "Номер_id" integer NOT NULL,
    "Сотрудник_id" integer NOT NULL,
    "Дата" timestamp without time zone
);


ALTER TABLE public.room_assignments OWNER TO postgres;

--
-- TOC entry 4985 (class 0 OID 16404)
-- Dependencies: 222
-- Data for Name: booked_services; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.booked_services (id, "Бронирование_id", "услуга_id", "Количество", "Дата") FROM stdin;
1	3	2	19	2025-06-20 00:00:00
\.


--
-- TOC entry 4983 (class 0 OID 16398)
-- Dependencies: 220
-- Data for Name: bookings; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.bookings (id, "Номер_id", "дата_заезда", "дата_выезда", "Статус", "Гость_id") FROM stdin;
3	6	2025-06-20 00:00:00	2025-07-09 00:00:00	t	2
4	2	2025-07-01 00:00:00	2025-07-05 00:00:00	t	1
6	5	2025-07-01 00:00:00	2025-07-10 00:00:00	t	3
7	2	2025-06-08 00:00:00	2025-06-15 00:00:00	t	4
8	5	2025-07-01 00:00:00	2025-07-10 00:00:00	t	2
16	2	2025-07-08 20:06:03.755213	2025-07-17 20:06:03	t	1
19	4	2025-07-30 14:10:21	2025-08-20 14:10:21	t	13
20	4	2025-07-02 15:42:28	2025-07-10 15:42:28.155553	t	14
21	7	2025-07-17 10:53:05	2025-07-31 10:53:05	t	15
22	5	2025-07-24 15:31:58	2025-07-31 15:31:58	t	16
\.


--
-- TOC entry 4980 (class 0 OID 16389)
-- Dependencies: 217
-- Data for Name: guests; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.guests (id, "дата_регистрации", "Имя", "Фамилия", "Телефон", email) FROM stdin;
1	2025-07-01 00:00:00	Алексей	Сафронов	9656452132	alexeiSaf@osd.com
2	2025-06-20 00:00:00	Елена	Смирнова	9572462159	elenaSm@asd.com
3	2025-06-20 00:00:00	Семен	Смирнов	9764526125	semasmir@isd.com
4	2025-06-08 00:00:00	Владимир	Иванов	9765842165	vladimiriv@owe.com
13	2025-07-09 14:10:17.050279	Имя	фамилия	9824849898	ывфв2SD
14	2025-07-10 15:43:49.894988	Санек	Умный	9859458765	sanyakrutoy@awe.com
15	2025-07-11 10:54:41.494331	Василий	Рудокоп	9876543212	ывыцв@ddw.com
16	2025-07-11 15:32:31.04876	Имя	ФВыао	89756462	ыорва
\.


--
-- TOC entry 4986 (class 0 OID 16407)
-- Dependencies: 223
-- Data for Name: payments; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.payments (id, "Бронирование_id", "Сумма", "Дата_платежа", "Метод") FROM stdin;
\.


--
-- TOC entry 4988 (class 0 OID 16413)
-- Dependencies: 225
-- Data for Name: room_assignments; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.room_assignments ("Номер_id", "Сотрудник_id", "Дата") FROM stdin;
\.


--
-- TOC entry 4982 (class 0 OID 16395)
-- Dependencies: 219
-- Data for Name: room_types; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.room_types (id, "название") FROM stdin;
1	стандарт
2	люкс
3	семейный
\.


--
-- TOC entry 4981 (class 0 OID 16392)
-- Dependencies: 218
-- Data for Name: rooms; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.rooms (id, "номер", "стоимость_за_ночь", "вместимость", "тип_номера") FROM stdin;
2	101	3000.00	1	1
3	102	6000.00	2	2
4	103	10000.00	4	3
5	201	4000.00	2	1
6	202	8000.00	2	2
7	203	11000.00	4	3
\.


--
-- TOC entry 4984 (class 0 OID 16401)
-- Dependencies: 221
-- Data for Name: services; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.services (id, "Стоимость", "Название", "Тип") FROM stdin;
1	700.00	завтрак	еда
2	2000.00	парковка	аренда
\.


--
-- TOC entry 4987 (class 0 OID 16410)
-- Dependencies: 224
-- Data for Name: staff; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.staff (id, "Имя", "Фамилия", "Должность") FROM stdin;
\.


--
-- TOC entry 5004 (class 0 OID 0)
-- Dependencies: 231
-- Name: BookedServices_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public."BookedServices_id_seq"', 1, true);


--
-- TOC entry 5005 (class 0 OID 0)
-- Dependencies: 229
-- Name: Bookings_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public."Bookings_id_seq"', 22, true);


--
-- TOC entry 5006 (class 0 OID 0)
-- Dependencies: 226
-- Name: Guests_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public."Guests_id_seq"', 16, true);


--
-- TOC entry 5007 (class 0 OID 0)
-- Dependencies: 232
-- Name: Payments_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public."Payments_id_seq"', 1, false);


--
-- TOC entry 5008 (class 0 OID 0)
-- Dependencies: 228
-- Name: RoomTypes_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public."RoomTypes_id_seq"', 1, false);


--
-- TOC entry 5009 (class 0 OID 0)
-- Dependencies: 227
-- Name: Rooms_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public."Rooms_id_seq"', 7, true);


--
-- TOC entry 5010 (class 0 OID 0)
-- Dependencies: 230
-- Name: Services_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public."Services_id_seq"', 2, true);


--
-- TOC entry 5011 (class 0 OID 0)
-- Dependencies: 233
-- Name: Staff_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public."Staff_id_seq"', 1, false);


--
-- TOC entry 4806 (class 2606 OID 16477)
-- Name: rooms Room_id; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.rooms
    ADD CONSTRAINT "Room_id" PRIMARY KEY (id) INCLUDE (id);


--
-- TOC entry 4809 (class 2606 OID 16475)
-- Name: room_types Rtype_id; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.room_types
    ADD CONSTRAINT "Rtype_id" PRIMARY KEY (id) INCLUDE (id);


--
-- TOC entry 4815 (class 2606 OID 16479)
-- Name: services Service_id; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.services
    ADD CONSTRAINT "Service_id" PRIMARY KEY (id) INCLUDE (id);


--
-- TOC entry 4824 (class 2606 OID 16482)
-- Name: staff Staff_id; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.staff
    ADD CONSTRAINT "Staff_id" PRIMARY KEY (id) INCLUDE (id);


--
-- TOC entry 4813 (class 2606 OID 16449)
-- Name: bookings id; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bookings
    ADD CONSTRAINT id PRIMARY KEY (id) INCLUDE (id);


--
-- TOC entry 4819 (class 2606 OID 16459)
-- Name: booked_services id_BS; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.booked_services
    ADD CONSTRAINT "id_BS" PRIMARY KEY (id) INCLUDE (id);


--
-- TOC entry 4804 (class 2606 OID 16457)
-- Name: guests id_guest; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.guests
    ADD CONSTRAINT id_guest PRIMARY KEY (id) INCLUDE (id);


--
-- TOC entry 4822 (class 2606 OID 16473)
-- Name: payments pay_id; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.payments
    ADD CONSTRAINT pay_id PRIMARY KEY (id) INCLUDE (id);


--
-- TOC entry 4820 (class 1259 OID 16518)
-- Name: fki_book_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX fki_book_id ON public.payments USING btree ("Бронирование_id");


--
-- TOC entry 4810 (class 1259 OID 16506)
-- Name: fki_id_room; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX fki_id_room ON public.bookings USING btree ("Номер_id");


--
-- TOC entry 4807 (class 1259 OID 16524)
-- Name: fki_n; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX fki_n ON public.rooms USING btree ("тип_номера");


--
-- TOC entry 4825 (class 1259 OID 16494)
-- Name: fki_p; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX fki_p ON public.room_assignments USING btree ("Сотрудник_id");


--
-- TOC entry 4816 (class 1259 OID 16500)
-- Name: fki_service_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX fki_service_id ON public.booked_services USING btree ("услуга_id");


--
-- TOC entry 4817 (class 1259 OID 16455)
-- Name: fki_б; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "fki_б" ON public.booked_services USING btree ("Бронирование_id");


--
-- TOC entry 4826 (class 1259 OID 16488)
-- Name: fki_к; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "fki_к" ON public.room_assignments USING btree ("Номер_id");


--
-- TOC entry 4811 (class 1259 OID 16532)
-- Name: fki_ш; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "fki_ш" ON public.bookings USING btree ("Гость_id");


--
-- TOC entry 4832 (class 2606 OID 16513)
-- Name: payments book_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.payments
    ADD CONSTRAINT book_id FOREIGN KEY ("Бронирование_id") REFERENCES public.bookings(id) NOT VALID;


--
-- TOC entry 4828 (class 2606 OID 16527)
-- Name: bookings id_guest; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bookings
    ADD CONSTRAINT id_guest FOREIGN KEY ("Гость_id") REFERENCES public.guests(id) NOT VALID;


--
-- TOC entry 4829 (class 2606 OID 16501)
-- Name: bookings id_room; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bookings
    ADD CONSTRAINT id_room FOREIGN KEY ("Номер_id") REFERENCES public.rooms(id) NOT VALID;


--
-- TOC entry 4833 (class 2606 OID 16483)
-- Name: room_assignments room_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.room_assignments
    ADD CONSTRAINT room_id FOREIGN KEY ("Номер_id") REFERENCES public.rooms(id) NOT VALID;


--
-- TOC entry 4830 (class 2606 OID 16495)
-- Name: booked_services service_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.booked_services
    ADD CONSTRAINT service_id FOREIGN KEY ("услуга_id") REFERENCES public.services(id) NOT VALID;


--
-- TOC entry 4834 (class 2606 OID 16489)
-- Name: room_assignments staff_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.room_assignments
    ADD CONSTRAINT staff_id FOREIGN KEY ("Сотрудник_id") REFERENCES public.staff(id) NOT VALID;


--
-- TOC entry 4831 (class 2606 OID 16450)
-- Name: booked_services Бронирование_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.booked_services
    ADD CONSTRAINT "Бронирование_id" FOREIGN KEY ("Бронирование_id") REFERENCES public.bookings(id) NOT VALID;


--
-- TOC entry 4827 (class 2606 OID 16519)
-- Name: rooms тип_номера_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.rooms
    ADD CONSTRAINT "тип_номера_id" FOREIGN KEY ("тип_номера") REFERENCES public.room_types(id) NOT VALID;


-- Completed on 2025-09-22 22:06:02

--
-- PostgreSQL database dump complete
--

--
-- Database "postgres" dump
--

\connect postgres

--
-- PostgreSQL database dump
--

-- Dumped from database version 17.5
-- Dumped by pg_dump version 17.5

-- Started on 2025-09-22 22:06:02

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

-- Completed on 2025-09-22 22:06:02

--
-- PostgreSQL database dump complete
--

-- Completed on 2025-09-22 22:06:02

--
-- PostgreSQL database cluster dump complete
--

